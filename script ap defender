local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")

-- =========================================================
-- CONFIGURACIÃ“N DE WHITELIST (SISTEMA DE ACCESO)
-- =========================================================
local WhitelistedIDs = {
Â  Â  2952083583,
Â  Â  3525548964,
Â  Â  8770004882, -- <--- CAMBIA ESTO POR TU USER ID DE ROBLOX
}

local function IsWhitelisted(id)
Â  Â  for _, wlId in ipairs(WhitelistedIDs) do
Â  Â  Â  Â  if id == wlId then return true end
Â  Â  end
Â  Â  return false
end

-- SISTEMA DE BLOQUEO (Si no es WL, muestra el mensaje y corta el script)
if not IsWhitelisted(LocalPlayer.UserId) then
Â  Â  local ErrorGui = Instance.new("ScreenGui", PlayerGui)
Â  Â  ErrorGui.Name = "WL_Error"
Â  Â Â 
Â  Â  local ErrorFrame = Instance.new("Frame", ErrorGui)
Â  Â  ErrorFrame.Size = UDim2.new(0, 300, 0, 150)
Â  Â  ErrorFrame.Position = UDim2.new(0.5, -150, 0.5, -75)
Â  Â  ErrorFrame.BackgroundColor3 = Color3.fromRGB(15, 16, 20)
Â  Â  ErrorFrame.BorderSizePixel = 0
Â  Â  Instance.new("UICorner", ErrorFrame).CornerRadius = UDim.new(0, 10)
Â  Â Â 
Â  Â  local Msg = Instance.new("TextLabel", ErrorFrame)
Â  Â  Msg.Size = UDim2.new(1, 0, 0.6, 0)
Â  Â  Msg.BackgroundTransparency = 1
Â  Â  Msg.Text = "YOU ARE NOT WL"
Â  Â  Msg.TextColor3 = Color3.fromRGB(255, 50, 50)
Â  Â  Msg.Font = Enum.Font.GothamBold
Â  Â  Msg.TextSize = 22

Â  Â  local Link = Instance.new("TextLabel", ErrorFrame)
Â  Â  Link.Size = UDim2.new(1, 0, 0.4, 0)
Â  Â  Link.Position = UDim2.new(0, 0, 0.5, 0)
Â  Â  Link.BackgroundTransparency = 1
Â  Â  Link.Text = "https://discord.gg/BsPsuYR8rc"
Â  Â  Link.TextColor3 = Color3.fromRGB(0, 255, 136)
Â  Â  Link.Font = Enum.Font.Gotham
Â  Â  Link.TextSize = 14
Â  Â Â 
Â  Â  task.delay(5, function()
Â  Â  Â  Â  ErrorGui:Destroy()
Â  Â  end)
Â  Â  return -- Detiene todo el script original
end

-- =========================================================
-- TU CÃ“DIGO ORIGINAL (LÃ“GICA Y UI)
-- =========================================================
local CommandPrefix = ";"Â 
local DetectionWord = "stealing"
local PunishCommands = {
Â  Â  "balloon ", "ballon ",Â 
Â  Â  "tiny ", "tini ",Â 
Â  Â  "inverse ",
Â  Â  "morph ", "moroh ",Â 
Â  Â  "ragdoll ",
Â  Â  "jumpscare ", "jump scared ",Â 
Â  Â  "rocket ", "roket "Â 
}
local AutoDefendActive = false
local IsAttacking = false
local SelectedPlayerName = nil
local SelectedButton = nil

-- CONFIGURACIÃ“N DE COLORES
local COLOR_FONDO = Color3.fromRGB(15, 16, 20)
local COLOR_HEADER = Color3.fromRGB(15, 16, 20)
local COLOR_ITEM = Color3.fromRGB(15, 16, 20)
local COLOR_TOGGLE_OFF = Color3.fromRGB(50, 52, 60)
local COLOR_TOGGLE_ON = Color3.fromRGB(0, 255, 136)
local COLOR_TEXTO = Color3.fromRGB(230, 230, 230)

-- FUNCIONES DE COMANDO
local function SendCommand(cmdText)
Â  Â  local cmdBar = nil
Â  Â  for _, v in pairs(PlayerGui:GetDescendants()) do
Â  Â  Â  Â  if v:IsA("TextBox") and (v.PlaceholderText:lower():find("command") or v.Name:lower():find("admin")) then
Â  Â  Â  Â  Â  Â  cmdBar = v
Â  Â  Â  Â  Â  Â  break
Â  Â  Â  Â  end
Â  Â  end
Â  Â  if cmdBar then
Â  Â  Â  Â  cmdBar.Text = cmdText
Â  Â  Â  Â  local connections = getconnections and getconnections(cmdBar.FocusLost) or {}
Â  Â  Â  Â  for _, connection in pairs(connections) do connection:Fire(true) end
Â  Â  Â  Â  cmdBar:ReleaseFocus(true)
Â  Â  end
end

local function RunPunishment(targetName)
Â  Â  for _, cmd in ipairs(PunishCommands) do
Â  Â  Â  Â  SendCommand(CommandPrefix .. cmd .. targetName)
Â  Â  Â  Â  task.wait(0.05)
Â  Â  end
end

local function GetTarget(textContext)
Â  Â  for _, p in pairs(Players:GetPlayers()) do
Â  Â  Â  Â  if p ~= LocalPlayer and (textContext:find(p.Name) or textContext:find(p.DisplayName)) then
Â  Â  Â  Â  Â  Â  return p.Name
Â  Â  Â  Â  end
Â  Â  end
Â  Â  local closestPlayer, dist = nil, math.huge
Â  Â  for _, p in pairs(Players:GetPlayers()) do
Â  Â  Â  Â  if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
Â  Â  Â  Â  Â  Â  local d = (LocalPlayer.Character.HumanoidRootPart.Position - p.Character.HumanoidRootPart.Position).Magnitude
Â  Â  Â  Â  Â  Â  if d < dist then dist = d; closestPlayer = p.Name end
Â  Â  Â  Â  end
Â  Â  end
Â  Â  return closestPlayer
end

-- CREACIÃ“N DE LA UI ORIGINAL
local screenGui = Instance.new("ScreenGui", PlayerGui)
screenGui.Name = "DanielResells_AutoDefense"
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 260, 0, 350)
mainFrame.Position = UDim2.new(0.5, -130, 0.5, -175)
mainFrame.BackgroundColor3 = COLOR_FONDO
mainFrame.BorderSizePixel = 0
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 10)

-- Header
local header = Instance.new("Frame", mainFrame)
header.Size = UDim2.new(1, -4, 0, 60)
header.Position = UDim2.new(0, 2, 0, 2)
header.BackgroundColor3 = COLOR_HEADER
Instance.new("UICorner", header).CornerRadius = UDim.new(0, 10)

local title = Instance.new("TextLabel", header)
title.Size = UDim2.new(1, 0, 0.6, 0)
title.Position = UDim2.new(0, 15, 0.1, 0)
title.BackgroundTransparency = 1
title.Text = "DANIEL RESELLS"
title.TextColor3 = Color3.fromRGB(0, 255, 136)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left

local subtitle = Instance.new("TextLabel", header)
subtitle.Size = UDim2.new(1, 0, 0.3, 0)
subtitle.Position = UDim2.new(0, 15, 0.6, 0)
subtitle.BackgroundTransparency = 1
subtitle.Text = "SYSTEM ACTIVE"
subtitle.TextColor3 = Color3.fromRGB(100, 100, 100)
subtitle.Font = Enum.Font.Gotham
subtitle.TextSize = 13
subtitle.TextXAlignment = Enum.TextXAlignment.Left

-- FunciÃ³n para Toggles
local function createToggle(name, pos, callback)
Â  Â  local frame = Instance.new("Frame", mainFrame)
Â  Â  frame.Size = UDim2.new(0.92, 0, 0, 45)
Â  Â  frame.Position = UDim2.new(0.04, 0, 0, pos)
Â  Â  frame.BackgroundColor3 = COLOR_ITEM
Â  Â  Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 8)
Â  Â Â 
Â  Â  local label = Instance.new("TextLabel", frame)
Â  Â  label.Size = UDim2.new(0.7, 0, 1, 0)
Â  Â  label.Position = UDim2.new(0.05, 0, 0, 0)
Â  Â  label.BackgroundTransparency = 1
Â  Â  label.Text = name
Â  Â  label.TextColor3 = COLOR_TEXTO
Â  Â  label.Font = Enum.Font.GothamBold
Â  Â  label.TextSize = 15
Â  Â  label.TextXAlignment = Enum.TextXAlignment.Left
Â  Â Â 
Â  Â  local btn = Instance.new("TextButton", frame)
Â  Â  btn.Size = UDim2.new(1, 0, 1, 0)
Â  Â  btn.BackgroundTransparency = 1
Â  Â  btn.Text = ""

Â  Â  local switchBG = Instance.new("Frame", frame)
Â  Â  switchBG.Size = UDim2.new(0, 40, 0, 22)
Â  Â  switchBG.Position = UDim2.new(0.75, 0, 0.25, 0)
Â  Â  switchBG.BackgroundColor3 = COLOR_TOGGLE_OFF
Â  Â  Instance.new("UICorner", switchBG).CornerRadius = UDim.new(1, 0)
Â  Â Â 
Â  Â  local circle = Instance.new("Frame", switchBG)
Â  Â  circle.Size = UDim2.new(0, 16, 0, 16)
Â  Â  circle.Position = UDim2.new(0, 3, 0.5, -8)
Â  Â  circle.BackgroundColor3 = Color3.new(1, 1, 1)
Â  Â  Instance.new("UICorner", circle).CornerRadius = UDim.new(1, 0)

Â  Â  local state = false
Â  Â  btn.MouseButton1Click:Connect(function()
Â  Â  Â  Â  state = not state
Â  Â  Â  Â  switchBG.BackgroundColor3 = state and COLOR_TOGGLE_ON or COLOR_TOGGLE_OFF
Â  Â  Â  Â  circle:TweenPosition(state and UDim2.new(0, 21, 0.5, -8) or UDim2.new(0, 3, 0.5, -8), "Out", "Quad", 0.15, true)
Â  Â  Â  Â  callback(state)
Â  Â  end)
end

createToggle("Auto-Defense", 75, function(v) AutoDefendActive = v end)

-- Lista de Jugadores
local listArea = Instance.new("ScrollingFrame", mainFrame)
listArea.Size = UDim2.new(0.92, 0, 0, 120)
listArea.Position = UDim2.new(0.04, 0, 0, 130)
listArea.BackgroundColor3 = Color3.fromRGB(15, 16, 18)
listArea.BorderSizePixel = 0
listArea.ScrollBarThickness = 2
Instance.new("UICorner", listArea).CornerRadius = UDim.new(0, 8)
local listLayout = Instance.new("UIListLayout", listArea)
listLayout.Padding = UDim.new(0, 5)
listLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function updatePlayerList()
Â  Â  for _, child in pairs(listArea:GetChildren()) do if child:IsA("TextButton") then child:Destroy() end end
Â  Â  for _, player in pairs(Players:GetPlayers()) do
Â  Â  Â  Â  if player ~= LocalPlayer then
Â  Â  Â  Â  Â  Â  local pBtn = Instance.new("TextButton", listArea)
Â  Â  Â  Â  Â  Â  pBtn.Size = UDim2.new(0.9, 0, 0, 35)
Â  Â  Â  Â  Â  Â  pBtn.BackgroundColor3 = Color3.fromRGB(30, 32, 40)
Â  Â  Â  Â  Â  Â  pBtn.Text = "Â  ðŸ‘¤ " .. player.Name
Â  Â  Â  Â  Â  Â  pBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
Â  Â  Â  Â  Â  Â  pBtn.Font = Enum.Font.Gotham
Â  Â  Â  Â  Â  Â  pBtn.TextSize = 14
Â  Â  Â  Â  Â  Â  pBtn.TextXAlignment = Enum.TextXAlignment.Left
Â  Â  Â  Â  Â  Â  Instance.new("UICorner", pBtn)
Â  Â  Â  Â  Â  Â  pBtn.MouseButton1Click:Connect(function()
Â  Â  Â  Â  Â  Â  Â  Â  if SelectedButton then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SelectedButton.BackgroundColor3 = Color3.fromRGB(30, 32, 40)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SelectedButton.TextColor3 = Color3.fromRGB(200, 200, 200)
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  SelectedPlayerName = player.Name
Â  Â  Â  Â  Â  Â  Â  Â  SelectedButton = pBtn
Â  Â  Â  Â  Â  Â  Â  Â  pBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 136)
Â  Â  Â  Â  Â  Â  Â  Â  pBtn.TextColor3 = Color3.fromRGB(15, 16, 20)
Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  end
Â  Â  end
Â  Â  listArea.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y + 10)
end

-- BotÃ³n ejecutar
local executeBtn = Instance.new("TextButton", mainFrame)
executeBtn.Size = UDim2.new(0.92, 0, 0, 30)
executeBtn.Position = UDim2.new(0.04, 0, 0, 260)
executeBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 136)
executeBtn.Text = "EXECUTE PUNISHMENT"
executeBtn.TextColor3 = Color3.fromRGB(15, 16, 20)
executeBtn.Font = Enum.Font.GothamBold
executeBtn.TextSize = 16
Instance.new("UICorner", executeBtn).CornerRadius = UDim.new(0, 6)

executeBtn.MouseButton1Click:Connect(function()
Â  Â  if SelectedPlayerName then
Â  Â  Â  Â  IsAttacking = true
Â  Â  Â  Â  RunPunishment(SelectedPlayerName)
Â  Â  Â  Â  IsAttacking = false
Â  Â  end
end)

-- Discord Watermark
local discordLabel = Instance.new("TextLabel", mainFrame)
discordLabel.Size = UDim2.new(1, 0, 0, 20)
discordLabel.Position = UDim2.new(0, 0, 1, -20)
discordLabel.BackgroundColor3 = COLOR_FONDO
discordLabel.BorderSizePixel = 0
discordLabel.Text = "discord.gg/bVMKBYvZ"
discordLabel.TextColor3 = Color3.fromRGB(0, 255, 136)
discordLabel.Font = Enum.Font.Gotham
discordLabel.TextSize = 10
discordLabel.TextXAlignment = Enum.TextXAlignment.Center
Instance.new("UICorner", discordLabel).CornerRadius = UDim.new(0, 10)

-- LOOP DE DEFENSA ORIGINAL
task.spawn(function()
Â  Â  while true do
Â  Â  Â  Â  if AutoDefendActive then
Â  Â  Â  Â  Â  Â  local foundTrig, msg = false, ""
Â  Â  Â  Â  Â  Â  for _, v in pairs(PlayerGui:GetDescendants()) do
Â  Â  Â  Â  Â  Â  Â  Â  if (v:IsA("TextLabel") or v:IsA("TextBox")) and v.Text:lower():find(DetectionWord) then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  foundTrig = true; msg = v.Text; break
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  if not foundTrig then
Â  Â  Â  Â  Â  Â  Â  Â  for _, v in pairs(workspace:GetDescendants()) do
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if v:IsA("BillboardGui") or v:IsA("SurfaceGui") then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for _, txt in pairs(v:GetDescendants()) do
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if txt:IsA("TextLabel") and txt.Text:lower():find(DetectionWord) then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  foundTrig = true; msg = txt.Text; break
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  if foundTrig and not IsAttacking then
Â  Â  Â  Â  Â  Â  Â  Â  local target = GetTarget(msg)
Â  Â  Â  Â  Â  Â  Â  Â  if target then IsAttacking = true; RunPunishment(target) end
Â  Â  Â  Â  Â  Â  elseif not foundTrig then
Â  Â  Â  Â  Â  Â  Â  Â  IsAttacking = false
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  Â  Â  task.wait(0.5)
Â  Â  end
end)

-- Dragging logic
local dragging, dragInput, dragStart, startPos
mainFrame.InputBegan:Connect(function(input)
Â  Â  if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true; dragStart = input.Position; startPos = mainFrame.Position end
end)
mainFrame.InputChanged:Connect(function(input)
Â  Â  if input.UserInputType == Enum.UserInputType.MouseMovement then dragInput = input end
end)
UserInputService.InputChanged:Connect(function(input)
Â  Â  if input == dragInput and dragging then
Â  Â  Â  Â  local delta = input.Position - dragStart
Â  Â  Â  Â  mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
Â  Â  end
end)
UserInputService.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end end)

Players.PlayerAdded:Connect(updatePlayerList)
Players.PlayerRemoving:Connect(updatePlayerList)
updatePlayerList()
